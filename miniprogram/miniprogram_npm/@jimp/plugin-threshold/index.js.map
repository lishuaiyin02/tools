{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _utils = require(\"@jimp/utils\");\n/**\n * Applies a minimum color threshold to a greyscale image.  Converts image to greyscale by default\n * @param {number} options object\n *  max: A number auto limited between 0 - 255\n *  replace: (optional) A number auto limited between 0 - 255 (default 255)\n *  autoGreyscale: (optional) A boolean whether to apply greyscale beforehand (default true)\n * @param {number} cb (optional) a callback for when complete\n * @return {this} this for chaining of methods\n */\nvar _default = () => ({\n  threshold(_ref, cb) {\n    let {\n      max,\n      replace = 255,\n      autoGreyscale = true\n    } = _ref;\n    if (typeof max !== \"number\") {\n      return _utils.throwError.call(this, \"max must be a number\", cb);\n    }\n    if (typeof replace !== \"number\") {\n      return _utils.throwError.call(this, \"replace must be a number\", cb);\n    }\n    if (typeof autoGreyscale !== \"boolean\") {\n      return _utils.throwError.call(this, \"autoGreyscale must be a boolean\", cb);\n    }\n    max = this.constructor.limit255(max);\n    replace = this.constructor.limit255(replace);\n    if (autoGreyscale) {\n      this.greyscale();\n    }\n    this.scanQuiet(0, 0, this.bitmap.width, this.bitmap.height, (x, y, idx) => {\n      const grey = this.bitmap.data[idx] < max ? this.bitmap.data[idx] : replace;\n      this.bitmap.data[idx] = grey;\n      this.bitmap.data[idx + 1] = grey;\n      this.bitmap.data[idx + 2] = grey;\n    });\n    if ((0, _utils.isNodePattern)(cb)) {\n      cb.call(this, null, this);\n    }\n    return this;\n  }\n});\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;\n//# sourceMappingURL=index.js.map"]}